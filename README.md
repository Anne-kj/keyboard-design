# keyboard-design

## 题目：高效均匀的打字编码方法

由于不同汉字的使用频率和输入方式不同，使用全拼输入法撰写文章时，26个字母键盘的使用频率并不均衡。
假设给定一篇中文文章素材（附件文章），使用全拼输入法（不考虑词组缩写）输入这篇文章中的文字。
请你评价使用全拼时26字母按键的均衡性和输入效率，并尝试设计一种新的拼写编码方法，使得输入同样文章时按键使用更加均衡、输入更加高效。

## 具体要求： 

1. 给定一篇中文文章（附件中的文章），统计出使用全拼输入法录入这篇文章时26个字母键的使用频率，绘制热力图。
- 输入: 一篇中文文章（附件文章）
- 输出: 录入这篇文章的26字母键使用热力图

2. 设计评价标准来分别评价使用全拼录入这篇文章时的按键使用均衡性和输入效率（请根据个人理解自行定义，建议使用明确的量化指标）。  
- 输出: 量化评价标准或方法，以及对全拼输入方案的评价结果

3. 基于你在题目2中制定的标准，尝试在全拼基础上改进打字编码方案，使得输入该文章时字母键的使用更加均衡、输入更加高效，展示改进的结果并分析。
- 输入: 一篇中文文章（附件文章）
- 输出: 新的打字编码方案、新旧方案在均衡性和输入效率方面的对比

4. 请于9月9日22：00之前将代码托管到github或者gitee，然后将代码链接返回此邮箱，并将在readme.md中展示程序设计思路、结果及结果分析。

### What（问题是什么）

设计一种拼写编码方法，使得其相较于全拼输入法，26 个字母键盘的使用更均衡，输入更高效。

### Why（为什么要设计新的编码方法）

不同汉字的使用频率和输入方式不同，有些汉字的使用频率很高，且汉字中某些声母、韵母的出现频率很高（如 in, ing, ong, en, eng 等），
故使用全拼输入法撰写文章时，26个字母键盘的使用频率并不均衡，往往会出现少数按键使用频率极高而其他按键很少使用的情况。

由于全拼输入法要求完整拼音的输入，即按键使用频次会很高，极大降低了输入效率；
输入时，存在同一手指连续两次按键之间的跨度较大的情况（参考标准打字指法），手指的移动也会降低输入效率。

### Where（难点）

1. 确定衡量编码方法性能的量化指标
2. 热力图的绘制及美化
3. 计算所需数据结构的设计及性能优化（eg. 统计每种字母出现的频次没有使用 python 内置的 `count()` 函数）
4. 量化指标的合理化调整
5. 如何生成编码方法

### How（如何解决该问题）

#### 一问

将文字转成字母，统计字母出现频率 $p$，然后绘制热力图

#### 二问

统计频率的同时统计每个字母后面字符的出现概率 $p_2$。量化指标为以下指标加权（指标越高越好）：

1. 均衡性：按键频率方差的倒数 $a > 0$，越高越好
2. 输入效率：和拼音的对应程度 $b \in [0,0.26]$，越高越好
3. 输入效率：总按键频率 $c \in (1, 6)$，越低越好
4. 输入效率：键位之间平均距离（仅计算同手指的键位之间的距离，不同手指的均记 0） $d\in(0, 3)$
5. 综合输入效率：$e = (10-1/b) + 12/c + 0.2/d$，越高越好，其中 (10-1/b) 的含义为：当编码方案中有十个拼音和按键对应（即 b = 0.1）时为0，若更多则给与加分，更少则减分。
6. 编码方法综合评价：$f = a + e$，越高越好

#### 三问

将文字转成声母和韵母，统计声母和韵母出现次数等所需数据，计算以上参数。

选择了市面上流行的几款双拼方案并运行该代码进行评测。

还编写了一个双拼方案随机生成器，持续运行该生成器和评测代码即可寻找优秀的双拼方案。

### Proof（方案验证）

![](https://github.com/Anne-kj/keyboard-design/raw/master/img/old.png)

全拼方案的热力图如上所示。

全拼和部分双拼的指标计算结果如下：

```
拼音方案：old
1. 均衡性——按键频率方差的倒数（越高越好）：0.8335608558513629
2. 输入效率——和拼音的对应程度（越高越好）：0.26
3. 输入效率——总按键频率（越低越好）：2.9514847113367924
4. 输入效率——键位之间平均距离（越低越好）：0.10913510986442262
5. 综合输入效率（越高越好）：12.052187320104434
6. 编码方法综合评价（越高越好）：12.885748175955797
拼音方案：小鹤双拼
1. 均衡性——按键频率方差的倒数（越高越好）：3.6814178160821496
2. 输入效率——和拼音的对应程度（越高越好）：0.26
3. 输入效率——总按键频率（越低越好）：1.9925488464510432
4. 输入效率——键位之间平均距离（越低越好）：0.15611755907038585
5. 综合输入效率（越高越好）：13.457369081959534
6. 编码方法综合评价（越高越好）：17.138786898041683
拼音方案：自然码双拼
1. 均衡性——按键频率方差的倒数（越高越好）：3.6928396858043886
2. 输入效率——和拼音的对应程度（越高越好）：0.26
3. 输入效率——总按键频率（越低越好）：1.9925488464510432
4. 输入效率——键位之间平均距离（越低越好）：0.17356859920777817
5. 综合输入效率（越高越好）：13.328565363127721
6. 编码方法综合评价（越高越好）：17.02140504893211
拼音方案：拼音加加双拼
1. 均衡性——按键频率方差的倒数（越高越好）：3.4523753929186944
2. 输入效率——和拼音的对应程度（越高越好）：0.26
3. 输入效率——总按键频率（越低越好）：1.9925488464510432
4. 输入效率——键位之间平均距离（越低越好）：0.17686490678928563
5. 综合输入效率（越高越好）：13.307089783368365
6. 编码方法综合评价（越高越好）：16.75946517628706
拼音方案：智能ABC双拼
1. 均衡性——按键频率方差的倒数（越高越好）：4.665001070623812
2. 输入效率——和拼音的对应程度（越高越好）：0.26
3. 输入效率——总按键频率（越低越好）：1.9925488464510432
4. 输入效率——键位之间平均距离（越低越好）：0.16836098723027063
5. 综合输入效率（越高越好）：13.364206864549761
6. 编码方法综合评价（越高越好）：18.029207935173574
拼音方案：国标双拼
1. 均衡性——按键频率方差的倒数（越高越好）：4.139870806477638
2. 输入效率——和拼音的对应程度（越高越好）：0.26
3. 输入效率——总按键频率（越低越好）：1.9925488464510432
4. 输入效率——键位之间平均距离（越低越好）：0.16642198277056036
5. 综合输入效率（越高越好）：13.378047519699043
6. 编码方法综合评价（越高越好）：17.51791832617668
```
